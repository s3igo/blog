---
import Blog from '~/layouts/Blog.astro';
import { type Post, Posts } from '~/domain/model/post';

export const getStaticPaths = async () => {
    const posts = await Posts.fetch();
    return posts.map((post) => ({
        params: {
            date: post.dates.published,
            slug: post.name,
        },
        props: { post },
    }));
};

type Props = { post: Post };
const { post } = Astro.props;
const { body, Content, headings, dates, tags } = post;
const blogProps = { body, headings, dates, tags };
---

<Blog {...blogProps}>
    <Content />
</Blog>
