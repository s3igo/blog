---
import Blog from '~/layouts/Blog.astro';
import { type Post, Posts } from '~/domain/model/post';

export const getStaticPaths = async () => {
    const posts = await Posts.fetch();
    return posts.map((post) => ({
        params: {
            date: post.meta.dates.published,
            slug: post.meta.name,
        },
        props: { post },
    }));
};

type Props = { post: Post };
const { post } = Astro.props;
const { body, Content, headings, meta } = post;
---

<Blog {body} {headings} dates={meta.dates} tags={meta.tags}>
    <Content />
</Blog>
