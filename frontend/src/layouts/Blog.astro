---
import "@fontsource/nunito-sans/700.css";
import "@fontsource/zen-kaku-gothic-new/700.css";
import "@fontsource/jetbrains-mono/400.css";
import "@fontsource/biz-udgothic/400.css";
import type { Frontmatter } from "~/types";
import { toStr } from "~/utils/tagArrayToString";
import { embedCreated, embedUpdated } from "~/utils/dateToString";
import Layout from "./Layout.astro";

type Props = {
    frontmatter: Frontmatter;
};
const {
    frontmatter: { tags, createdAt, updatedAt },
} = Astro.props;

// const description =
const created = embedCreated(createdAt);
const updated = updatedAt ? embedUpdated(updatedAt) : null;
const tagStr = tags?.length ? toStr(tags) : null;
---

<Layout title="post">
    <div class="text-subtxt">
        <span class="block">{created}</span>
        {updated && <span class="block">{updated}</span>}
        {tagStr && <span class="block">{tagStr}</span>}
    </div>
    <div class="blog">
        <slot />
    </div>
</Layout>
<style is:global>
    code {
        @apply font-code;
    }

    .blog {
        @apply text-lg;
    }

    .blog h2,
    .blog h3,
    .blog h4,
    .blog h5 {
        @apply pt-16 pb-3 underline decoration-primary decoration-2 underline-offset-4;
    }
    .blog h1 {
        @apply mb-4 border-b border-dashed border-secondary pb-4 pt-4 text-4xl text-primary;
    }

    .blog h2 {
        @apply text-3xl;
    }

    .blog h3 {
        @apply text-2xl;
    }

    .blog h4 {
        @apply text-xl;
    }

    .blog h2 + h3,
    .blog h3 + h4,
    .blog h4 + h5 {
        @apply pt-3;
    }

    .blog p,
    .blog ul,
    .blog ol {
        @apply py-3;
    }

    .blog ul {
        @apply list-inside list-disc;
    }

    .blog ol {
        @apply list-inside list-decimal;
    }

    .blog em {
        @apply px-1;
    }

    /* TODO: li > li (再帰的に), pre, a, blockquote  */
</style>
