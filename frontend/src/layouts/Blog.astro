---
import "@fontsource/nunito-sans/700.css";
import "@fontsource/zen-kaku-gothic-new/700.css";
import "@fontsource/jetbrains-mono/400.css";
import "@fontsource/biz-udgothic/400.css";
import type { Frontmatter } from "~/types";
import { toStr } from "~/utils/tagArrayToString";
import { embedCreated, embedUpdated } from "~/utils/dateToString";
import Layout from "./Layout.astro";

type Props = {
    frontmatter: Frontmatter;
};
const {
    frontmatter: { tags, createdAt, updatedAt },
} = Astro.props;

// const description =
const created = embedCreated(createdAt);
const updated = updatedAt ? embedUpdated(updatedAt) : null;
const tagStr = tags?.length ? toStr(tags) : null;
---

<Layout title="post">
    <div class="text-foreground/50">
        <span class="block">{created}</span>
        {updated && <span class="block">{updated}</span>}
        {tagStr && <span class="block">{tagStr}</span>}
    </div>
    <div class="blog">
        <slot />
    </div>
</Layout>
<style is:global>
    code {
        @apply font-code;
    }

    .blog {
        @apply text-lg;
    }

    .blog h2,
    .blog h3,
    .blog h4,
    .blog h5 {
        @apply pt-[72px] pb-3 underline decoration-primary decoration-2 underline-offset-4;
    }
    .blog h1 {
        @apply mb-4 border-b border-dashed border-tertiary pb-4 pt-4 text-4xl text-primary;
    }

    .blog h2 {
        @apply text-3xl;
    }

    .blog h3 {
        @apply text-2xl;
    }

    .blog h4 {
        @apply text-xl;
    }

    .blog h2 + h3,
    .blog h3 + h4,
    .blog h4 + h5 {
        @apply pt-3;
    }

    .blog p,
    .blog ul,
    .blog ol {
        @apply py-4;
    }

    .blog ul {
        @apply list-inside list-disc pl-4;
    }

    .blog ul ul {
        @apply ml-8;
    }

    .blog li > ul {
        @apply py-0;
    }

    .blog ol {
        @apply list-inside list-decimal;
    }

    .blog a {
        @apply text-secondary decoration-2 underline-offset-4 hover:underline;
    }

    /* 斜体 */
    .blog em {
        @apply px-1;
    }

    /* 引用 */
    .blog blockquote {
        @apply border-l-4 border-tertiary pl-6;
    }

    /* インラインコード */
    .blog code:not(pre > *) {
        @apply mx-1 rounded-md bg-shadow/40 px-1 text-base text-foreground/60;
    }

    /* コードブロック */
    .blog pre {
        @apply my-4 rounded-xl bg-tertiary p-4 text-base;
    }
</style>
